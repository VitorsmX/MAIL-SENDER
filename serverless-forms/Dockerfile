FROM node:lts

WORKDIR /app

COPY package*.json ./

RUN npm install --production

COPY . .

ARG PORT
ENV PORT=${PORT:-8080}

ARG EMAIL_HOST
ARG EMAIL_PORT
ARG EMAIL_USER
ARG EMAIL_PASS
ARG FROM
ARG TO
ARG MESSAGE
ARG FORM
ENV EMAIL_HOST=$EMAIL_HOST
ENV EMAIL_PORT=$EMAIL_PORT
ENV EMAIL_USER=$EMAIL_USER
ENV EMAIL_PASS=$EMAIL_PASS
ENV FROM=$FROM
ENV TO=$TO
ENV MESSAGE=$MESSAGE
ENV FORM=$FORM

EXPOSE ${PORT}

CMD ["npm", "start"]
